{% extends 'base.html' %}

{% block content %}
<style>
  .category-card {
  background: white;
  border-radius: 15px;
  padding: 30px;
  text-align: center;
  transition: 0.3s;
  box-shadow: 0 10px 25px rgba(0,0,0,0.08);
}

.category-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.15);
}

.category-body h5 {
  font-weight: 700;
}

.category-body span {
  color: #f39c12;
  font-weight: 600;
}

.food-card{
  border-radius:18px;
  overflow:hidden;
  transition:0.3s;
}

.food-card:hover{
  transform:translateY(-10px);
  box-shadow:0 25px 50px rgba(0,0,0,0.18);
}

.food-card img{
  transition:0.4s;
}

.food-card:hover img{
  transform:scale(1.05);
}
</style>
<!-- HERO -->
<section class="hero">
  <div class="overlay"></div>
  <div class="container h-100 d-flex align-items-center">
    <div class="text-white hero-content">
      <h1>Experience <span>Luxury Taste</span></h1>
      <p>Fresh ingredients. Expert chefs. Delivered hot.</p>
      <a href="{% url 'menu' %}" class="btn btn-lg btn-warning mt-3">Explore Menu</a>
    </div>
  </div>
</section>


<!-- CATEGORY SECTION -->
<section class="py-5 bg-light">
  <div class="container">

    <div class="text-center mb-5">
      <h2 class="fw-bold">Browse By Category</h2>
      <p class="text-muted">Find your favorite dishes</p>
    </div>

    <div class="row g-4">

      {% for cat in categories %}
      <div class="col-md-3 col-sm-6">
        <a href="{% url 'category_items' cat.id %}" style="text-decoration:none;">
          <div class="category-card">

            <div class="category-body">
              <h5>{{ cat.name }}</h5>
              <span>{{ cat.item_count }} Items</span>
            </div>

          </div>
        </a>
      </div>
      {% endfor %}

    </div>

  </div>
</section>

<!-- Top Selling Section -->
<section class="py-5">
  <div class="container">

    <div class="text-center mb-5">
      <h2>üî• Top Selling Dishes</h2>
      <p class="text-muted">Customer favorite items</p>
    </div>

    <div class="row g-4">

      {% for item in top_selling %}
      <div class="col-md-3 col-sm-6">

        <div class="card food-card border-0 shadow-sm">

          {% if item.food__image %}
          <img src="{{ item.food__image.url }}">
          {% endif %}


          <div class="card-body text-center">
            <h6>{{ item.food__name }}</h6>

            <p class="text-warning fw-bold mb-1">
              ${{ item.food__price }}
            </p>

            <small class="text-muted">
              Sold {{ item.total_sold }} times
            </small>

            <a href="{% url 'add_to_cart' item.food__id %}"
               class="btn btn-warning w-100 mt-2">
               Add To Cart
            </a>

          </div>
        </div>

      </div>
      {% endfor %}

    </div>

  </div>
</section>


<section class="today-special py-5 bg-light">
  <div class="container">
    <div class="text-center mb-4">
      <h2>Today's Specials</h2>
      <p class="text-muted">Handpicked dishes just for you</p>
    </div>

    <div class="row g-4">
      {% for food in today_specials %}
      <div class="col-md-3 col-sm-6">
        <div class="card shadow-sm border-0">
          {% if food.image %}
          <img src="{{ food.image.url }}" class="card-img-top" style="height:200px; object-fit:cover;">
          {% endif %}
          <div class="card-body text-center">
            <h6>{{ food.name }}</h6>
            <p class="text-warning fw-bold mb-1">${{ food.price }}</p>
            <p class="text-muted" style="font-size:0.85rem;">{{ food.description|truncatechars:60 }}</p>
            <a href="{% url 'add_to_cart' food.id %}" class="btn btn-warning w-100 mt-2">Add To Cart</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
<section class="offers-section py-5">
  <div class="container">

    <div class="text-center mb-4">
      <h2>üî• Current Offers</h2>
      <p class="text-muted">Grab these deals before they‚Äôre gone!</p>
    </div>

    <div class="row g-4">

      {% for offer in offers %}
      <div class="col-md-3 col-sm-6">

        <div class="card shadow-sm border-0 h-100 position-relative offer-card">

          <!-- Offer Badge -->
          <span class="badge bg-danger position-absolute m-2">
            {{ offer.discount_percentage }}% OFF
          </span>

          <!-- Food Image -->
          {% if offer.food.image %}
          <img src="{{ offer.food.image.url }}"
               class="card-img-top"
               style="height:200px; object-fit:cover;">
          {% endif %}

          <div class="card-body text-center">

            <!-- Offer Title -->
            <h5>{{ offer.title }}</h5>

            <!-- Food Name -->
            <h6 class="text-muted mb-2">
              {{ offer.food.name }}
            </h6>

            <!-- Price Section -->
            <p class="mb-1">
              <del class="text-muted">‡ß≥ {{ offer.food.price }}</del>
            </p>

            <p class="text-danger fw-bold fs-5">
              ‡ß≥ {{ offer.discounted_price }}
            </p>

            <!-- Description -->
            <p class="text-muted small">
              {{ offer.description|truncatechars:60 }}
            </p>

            <!-- Expiry -->
            <small class="text-muted d-block mb-3">
              Valid until {{ offer.end_date|date:"d M Y" }}
            </small>

            <!-- ‚≠ê Add To Cart Button -->
            {% if offer.food.stock > 0 %}
            <a href="{% url 'add_to_cart' offer.food.id %}"
               class="btn btn-danger w-100">
               üõí Add To Cart
            </a>
            {% else %}
            <button class="btn btn-secondary w-100" disabled>
              Out of Stock
            </button>
            {% endif %}

          </div>
        </div>

      </div>
      {% empty %}
      <p class="text-center">No offers at the moment. Check back later!</p>
      {% endfor %}

    </div>
  </div>
</section>

<section class="combo-section py-5">
  <div class="container">

    <!-- Section Header -->
    <div class="text-center mb-4">
      <h2>üçî Featured Combo Deals</h2>
      <p class="text-muted">Get the best combos at discounted prices!</p>
    </div>

    <div class="row g-4">

      {% for combo in combo_deals %}
      <div class="col-md-4 col-sm-6">
        <div class="card shadow-sm h-100 position-relative combo-card">

          <!-- Discount Badge -->
          <span class="badge bg-danger position-absolute m-2">
            {{ combo.discount_percentage }}% OFF
          </span>

          <div class="card-body text-center">

            <!-- Combo Title -->
            <h5>{{ combo.title }}</h5>

            <!-- Foods in Combo -->
            <p class="text-muted small mb-2">
              {% for food in combo.foods.all %}
                {{ food.name }}{% if not forloop.last %}, {% endif %}
              {% endfor %}
            </p>

            <!-- Prices -->
            <p class="mb-1">
              <del class="text-muted">‡ß≥ {{ combo.total_price }}</del>
            </p>
            <p class="text-danger fw-bold fs-5">
              ‡ß≥ {{ combo.discounted_price }}
            </p>

            <!-- Combo Description -->
            <p class="text-muted" style="font-size:0.85rem;">
              {{ combo.description|truncatechars:60 }}
            </p>

            <!-- Validity -->
            <small class="text-muted d-block mb-3">
              Valid until {{ combo.end_date|date:"d M Y" }}
            </small>

            <!-- Add to Cart Button -->
            {% if combo.foods.first.stock > 0 %}
            <a href="{% url 'add_to_cart' combo.foods.first.id %}"
               class="btn btn-danger w-100">
               üõí Add Combo to Cart
            </a>
            {% else %}
            <button class="btn btn-secondary w-100" disabled>
              Out of Stock
            </button>
            {% endif %}

          </div>
        </div>
      </div>
      {% empty %}
      <p class="text-center">No combo deals available at the moment!</p>
      {% endfor %}

    </div>
  </div>
</section>



{% endblock %}
